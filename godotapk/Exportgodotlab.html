<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Godot HTML5 Game</title>

    <!--  Load the engine script (defines Engine and Preloader) -->
    <script src="Exportgodotlab.js"></script>

    <script>
        //  Define PATH first
        var PATH = {
            splitPath: function(filename) {
                var splitPathRe = /^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;
                return splitPathRe.exec(filename).slice(1);
            },
        };

        //  Expose PATH and Engine globally (only if defined)
        if (typeof window !== 'undefined') {
            window.PATH = PATH ?? window.PATH;
            if (typeof Engine !== 'undefined') {
                window.Engine = Engine ?? window.Engine;
            } else {
                console.error('Engine is not defined. Make sure Exportgodotlab.js is loading correctly.');
            }
        }

        //  Load the game on page load
        window.addEventListener('load', () => {
            const wasmUrl = 'https://minec-c.github.io/satnotcanvas/wasm1/Exportgodotlab.wasm';
            if (window.Engine && window.Engine.isWebGLAvailable()) {
                window.Engine.load(wasmUrl);
                console.log('Engine loaded successfully');
            } else {
                console.error('WebGL is not supported or Engine is not available');
            }
        });
    </script>
</head>
<body>
    <h1>My Godot HTML5 Game</h1>
    <div id="game-container"></div>
</body>
</html>
